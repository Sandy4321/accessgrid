{\rtf1\ansi\ansicpg1252\deff0\deflang1033
{\fonttbl
{\f0\fnil\fcharset0\fprq0\fttruetype Arial;}
{\f1\fnil\fcharset0\fprq0\fttruetype NULL;}
{\f2\fnil\fcharset0\fprq0\fttruetype Times New Roman;}
{\f3\fnil\fcharset0\fprq0\fttruetype Courier;}
{\f4\fnil\fcharset0\fprq0\fttruetype Symbol;}
{\f5\fnil\fcharset0\fprq0\fttruetype Dingbats;}
{\f6\fnil\fcharset0\fprq0\fttruetype Courier New;}}
{\colortbl
\red0\green0\blue0;
\red255\green255\blue255;}
{\stylesheet
{\s5\fi-431\li720 Dashed List;}
{\s2\fi-431\li720 Box List;}
{\s21\tx1584\sbasedon16\snext15 Section Heading;}
{\s17\tx431\sbasedon9\snext15 Numbered Heading 2;}
{\s20\f6\sbasedon15 Plain Text;}
{\s12\fi-431\li720 Implies List;}
{\s26\fi-431\li720\sbasedon19 Upper Case List;}
{\s7\fi-431\li720 Hand List;}
{\s27\fi-431\li720\sbasedon19 Upper Roman List;}
{\s15\f2\fs24 Normal;}
{\s1\li1440\ri1440\sa120\sbasedon15 Block Text;}
{\s14\fi-431\li720\sbasedon15 Lower Roman List;}
{\s11\fi-431\li720 Heart List;}
{\s13\fi-431\li720\sbasedon19 Lower Case List;}
{\s24\fi-431\li720 Tick List;}
{\s8\sb440\sa60\f0\fs34\b\sbasedon15\snext15 Heading 1;}
{\s9\sb440\sa60\f0\fs28\b\sbasedon15\snext15 Heading 2;}
{\s10\sb440\sa60\f0\fs24\b\sbasedon15\snext15 Heading 3;}
{\s19\fi-431\li720 Numbered List;}
{\s23\fi-431\li720 Star List;}
{\s16\tx431\sbasedon8\snext15 Numbered Heading 1;}
{\s6\fi-431\li720 Diamond List;}
{\s18\tx431\sbasedon10\snext15 Numbered Heading 3;}
{\s4\tx1584\sbasedon16\snext15 Chapter Heading;}
{\s22\fi-431\li720 Square List;}
{\s25\fi-431\li720 Triangle List;}
{\s3\fi-431\li720 Bullet List;}}
{\*\listtable
{\list\listtemplateid827788416{\listlevel\levelnfc0\levelstartat1\levelspace0\levelfollow0{\leveltext\'02\'00.;}{\levelnumbers\'01;}}{\listlevel\levelnfc0\levelstartat1\levelspace0\levelfollow0{\leveltext\'04\'00.\'01.;}{\levelnumbers\'01\'03;}}{\listlevel\levelnfc0\levelstartat1\levelspace0\levelfollow0{\leveltext\'02\'00.;}{\levelnumbers\'01;}}{\listlevel\levelnfc0\levelstartat1\levelspace0\levelfollow0{\leveltext\'02\'00.;}{\levelnumbers\'01;}}{\listlevel\levelnfc0\levelstartat1\levelspace0\levelfollow0{\leveltext\'02\'00.;}{\levelnumbers\'01;}}{\listlevel\levelnfc0\levelstartat1\levelspace0\levelfollow0{\leveltext\'02\'00.;}{\levelnumbers\'01;}}{\listlevel\levelnfc0\levelstartat1\levelspace0\levelfollow0{\leveltext\'02\'00.;}{\levelnumbers\'01;}}{\listlevel\levelnfc0\levelstartat1\levelspace0\levelfollow0{\leveltext\'02\'00.;}{\levelnumbers\'01;}}{\listlevel\levelnfc0\levelstartat1\levelspace0\levelfollow0{\leveltext\'02\'00.;}{\levelnumbers\'01;}}\listid2107612293}
{\list\listtemplateid746733300\listsimple{\listlevel\levelnfc23\levelstartat0\levelspace0\levelfollow0\fi-431\li720{\leveltext\'01\'b7 ;}{\levelnumbers;}\f4}\listid192734754}
{\list\listtemplateid2061311112\listsimple{\listlevel\levelnfc23\levelstartat0\levelspace0\levelfollow0\fi-431\li720{\leveltext\'01\'b7 ;}{\levelnumbers;}\f4}\listid1586128940}
{\list\listtemplateid1908756341\listsimple{\listlevel\levelnfc0\levelstartat1\levelspace0\levelfollow0\fi-431\li720{\leveltext\'02\'00.;}{\levelnumbers\'01;}}\listid818376912}}
{\*\listoverridetable
{\listoverride\listoverridecount0\listid2107612293\levelnfc0\levelstartat1\levelspace0\levelfollow0{\leveltext\'02\'00.;}{\levelnumbers\'01;}\ls1}
{\listoverride\listoverridecount0\listid2107612293\levelnfc0\levelstartat1\levelspace0\levelfollow0{\leveltext\'04\'00.\'01.;}{\levelnumbers\'01\'03;}\ls2}
{\listoverride\listoverridecount0\listid2107612293\levelnfc0\levelstartat1\levelspace0\levelfollow0{\leveltext\'04\'00.\'01.;}{\levelnumbers\'01\'03;}\ls3}
{\listoverride\listoverridecount0\listid192734754\levelnfc23\levelstartat0\levelspace0\levelfollow0\fi-431\li720{\leveltext\'01\'b7 ;}{\levelnumbers;}\f4\ls4}
{\listoverride\listoverridecount0\listid1586128940\levelnfc23\levelstartat0\levelspace0\levelfollow0\fi-431\li720{\leveltext\'01\'b7 ;}{\levelnumbers;}\f4\ls5}
{\listoverride\listoverridecount0\listid818376912\levelnfc0\levelstartat1\levelspace0\levelfollow0\fi-431\li720{\leveltext\'02\'00.;}{\levelnumbers\'01;}\ls6}}

\kerning0\cf0\viewkind1\paperw12240\paperh15840\margl1440\margr1440\widowctl
\sectd\sbknone\colsx360\pgncont
\pard\plain\qj\sb440\sa60\s8{\f0\fs34\b\lang1033{\*\listtag0}Access Grid RPM Package mini-HOWTO}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}Author: Ti Leggett <leggett@mcs.anl.gov>}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}Date: March 26, 2003}
\par{\listtext\pard\qj\sb440\sa60 1.	}\pard\plain{\qj\sb440\sa60\s16\f0\fs34\b\lang1033{\*\listtag0}{\*\abilist\abilistid2107612293\abilistparentid0\abilistlevel1\abistartat1{\abifieldfont Arial}{\abilistdecimal }{\abilistdelim %L.}{\abiliststyle Numbered List}}{\*\pn\pnql\pnstart1\pnlvlbody\pndec{\pntxtb }{\pntxta .}}\ls1\ilvl0\tx431{\f0\fs34\b\lang1033{\*\listtag0}Preface}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}This document will attempt to describe how to build RPMs of the Access Grid 2.0 software. It will briefly describe how rpm building works and the rpm spec file format and keywords. It will then describe in detail how we use rpm to build our packages.}
\par{\listtext\pard\qj\sb440\sa60 2.	}\pard\plain{\qj\sb440\sa60\s16\f0\fs34\b\lang1033{\*\listtag0}{\*\abilist\abilistid2107612293\abilistlevel1\abistartat1{\abifieldfont Arial}{\abilistdecimal }{\abilistdelim %L.}{\abiliststyle Numbered List}}{\*\pn\pnql\pnstart1\pnlvlbody\pndec{\pntxtb }{\pntxta .}}\ls1\ilvl0\tx431{\f0\fs34\b\lang1033{\*\listtag0}Behind RPM}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}What an rpm is is basically a tarball with some metadata about that the contents of the tarball. When you install the rpm it basically untars  the contents and add the metadata to a database. Examples of the metadata that are tracked are the files in the package, the name of the package, the person and machine who packaged it, what the package provides and what the package depends on to install.}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}To build an rpm you need an rpm spec file. This file lays out the metadata, the packages and sub packages, files that go in those packages, and scripts that can be run at various points of the (un)installation process. }
\par{\listtext\pard\qj\sb440\sa60 2.1.	}\pard\plain{\qj\sb440\sa60\s17\f0\fs28\b\lang1033{\*\listtag0}{\*\abilist\abilistid1718862097\abilistparentid2107612293\abilistlevel2\abistartat1{\abifieldfont Arial}{\abilistdecimal }{\abilistdelim %L.}{\abiliststyle Numbered List}}{\*\pn\pnql\pnstart1\pnprev\pnlvl9\pndec{\pntxtb }{\pntxta .}}\ls2\ilvl1\tx431{\f0\fs28\b\lang1033{\*\listtag0}BuildRoot}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}One of the pieces of metadata is the BuildRoot. Normally when you have a source package, you compile it using make or some other method and then install it using make. If you're root, this usually gets installed in /usr or /usr/local. Part of the rpm build process is to compile your software and install it, but you don't want to install the files in /usr or /usr/local while you're building it (especially if you're still debugging your rpm build process). This is where BuildRoot comes. It defines a virtual root point where you can install your files temporarily while you're building the rpm. We use /var/tmp/AccessGrid-<version> (2.0beta as of 03/26/2003). If you were to go into that directory during the build process you'd see what you're install tree looks like. Say your package should have /usr/lib/foo.so, there would be a /var/tmp/AccessGrid-2.0beta/usr/lib/foo.so.}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}So if you where you would normally run }{\f3\fs24\lang1033{\*\listtag0}./configure --prefix=/usr/local}{\f2\fs24\lang1033{\*\listtag0} to set your install prefix, now you would run .}{\f3\fs24\lang1033{\*\listtag0}/configure --prefix=%\{buildroot\}/usr/local}{\f2\fs24\lang1033{\*\listtag0} (more on this a bit later). RPM uses the BuildRoot implictly when you define the files that are to go in to the package. So where you see }{\f3\fs24\lang1033{\*\listtag0}/usr/lib/foo.so}{\f2\fs24\lang1033{\*\listtag0} in the }{\f3\fs24\lang1033{\*\listtag0}%files}{\f2\fs24\lang1033{\*\listtag0} section, rpm is really looking at }{\f3\fs24\lang1033{\*\listtag0}%\{buildroot\}/usr/lib/foo.so}{\f2\fs24\lang1033{\*\listtag0} to find the file, but it will ultimately put the file in }{\f3\fs24\lang1033{\*\listtag0}/usr/lib/foo.so}{\f2\fs24\lang1033{\*\listtag0} when you install the rpm.}
\par{\listtext\pard\qj\sb440\sa60 3.	}\pard\plain{\qj\sb440\sa60\s16\f0\fs34\b\lang1033{\*\listtag0}{\*\abilist\abilistid2107612293\abilistlevel1\abistartat1{\abifieldfont Arial}{\abilistdecimal }{\abilistdelim %L.}{\abiliststyle Numbered List}}{\*\pn\pnql\pnstart1\pnlvlbody\pndec{\pntxtb }{\pntxta .}}\ls1\ilvl0\tx431{\f0\fs34\b\lang1033{\*\listtag0}The Access Grid 2.0 Spec File}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}If you haven't already done so, grab the spec file out of CVS. If you really want to follow along grab version 1.8 as that's the version I'm using in this document. I'm going to break the spec file into 6 large sections: Preamble, Package Definitions, Building/Installing Source, File Definitions, Pre/Post Install Scripts, and ChangeLog.}
\par{\listtext\pard\qj\sb440\sa60 3.1.	}\pard\plain{\qj\sb440\sa60\s17\f0\fs28\b\lang1033{\*\listtag0}{\*\abilist\abilistid518283371\abilistparentid2107612293\abilistlevel2\abistartat1{\abifieldfont Arial}{\abilistdecimal }{\abilistdelim %L.}{\abiliststyle Numbered List}}{\*\pn\pnql\pnstart1\pnprev\pnlvl9\pndec{\pntxtb }{\pntxta .}}\ls3\ilvl1\tx431{\f0\fs28\b\lang1033{\*\listtag0}Preamble}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}The Preamble is where we set up some common variables that are used repeatedly throughout the script and it looks like:}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%define name\tab \tab AccessGrid}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%define version\tab 2.0beta}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%define release\tab 2}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%define prefix\tab \tab /usr}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%define sysconfdir\tab /etc/%\{name\}}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%define sharedir\tab %\{prefix\}/share}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%define gnomedir\tab %\{sharedir\}/gnome/apps}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%define kdedir\tab \tab %\{sharedir\}/applnk}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%define aghome\tab \tab /var/lib/ag}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%define buildroot\tab /var/tmp/%\{name\}-%\{version\}}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}Each variable starts with }{\f3\fs24\lang1033{\*\listtag0}%define}{\f2\fs24\lang1033{\*\listtag0}, then gives the variable name, then it's value. In order to use the variable, you simply type %\{<variable>\} as is done with }{\f3\fs24\lang1033{\*\listtag0}%\{name\}}{\f2\fs24\lang1033{\*\listtag0}. The variables that are important here are }{\f3\fs24\lang1033{\*\listtag0}%\{version\}}{\f2\fs24\lang1033{\*\listtag0}, }{\f3\fs24\lang1033{\*\listtag0}%\{release\}}{\f2\fs24\lang1033{\*\listtag0}, and }{\f3\fs24\lang1033{\*\listtag0}%\{buildroot\}}{\f2\fs24\lang1033{\*\listtag0}. The variable }{\f3\fs24\lang1033{\*\listtag0}%\{buildroot\}}{\f2\fs24\lang1033{\*\listtag0} is what we define our rpm BuildRoot to be.}
\par{\listtext\pard\qj\sb440\sa60 3.2.	}\pard\plain{\qj\sb440\sa60\s17\f0\fs28\b\lang1033{\*\listtag0}{\*\abilist\abilistid518283371\abilistlevel2\abistartat1{\abifieldfont Arial}{\abilistdecimal }{\abilistdelim %L.}{\abiliststyle Numbered List}}{\*\pn\pnql\pnstart1\pnprev\pnlvl9\pndec{\pntxtb }{\pntxta .}}\ls3\ilvl1\tx431{\f0\fs28\b\lang1033{\*\listtag0}Package Definitions}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}The Package Definitions are we define the metadata for a package or sub-package. Here you define the name, versions, URLs, etc. for a package. There are two types of definitions the "top level" package and sub-packages. The "top level" package looks like:}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Summary:\tab \tab The Access Grid Toolkit}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Name:\tab \tab %\{name\}}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Version:\tab \tab %\{version\}}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Release:\tab \tab %\{release\}}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Copyright:\tab AGTPL}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Group:\tab \tab Utilities/System}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}URL:\tab \tab \tab http://www.accessgrid.org}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Vendor:\tab \tab Argonne National Laboratory}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Source:\tab \tab %\{name\}-%\{version\}.tar.gz}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}BuildRoot:\tab %\{buildroot\}}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Requires:\tab \tab /usr/bin/python2.2}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Requires:\tab \tab pyGlobus}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Requires:\tab \tab logging}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Obsoletes:\tab AccessGrid-2.0alpha}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%description}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}The Access Grid Toolkit provides the necessary components for users to participate in Access Grid based collaborations, and also for developers to work on network services, applications services and node services to extend the functionality of the Access Grid.}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}This module provides the core components to start participating in the Access Grid.}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}Here you can see the metadata for the "top level" package. Notice that there is a name, version, and release. These are used to make the actual rpm filename and it would look like        }{\f3\fs24\lang1033{\*\listtag0}%\{name\}-%\{version\}-%\{release\}.i386.rpm}{\f2\fs24\lang1033{\*\listtag0} and with the variable substituted from the Preamble you get }{\f3\fs24\lang1033{\*\listtag0}AccessGrid-2.0beta-2.i386.rpm}{\f2\fs24\lang1033{\*\listtag0}. }
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}A sub-package looks like:}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%package VenueClient}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Summary:\tab \tab The Access Grid Toolkit Venue Client}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Version:\tab \tab %\{version\}}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Release:\tab \tab %\{release\}}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Group:\tab \tab Utilities/System}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Requires:\tab \tab AccessGrid}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Obsoletes:\tab AccessGrid-VenueClient-2.0alpha}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%description VenueClient}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}The Access Grid Toolkit provides the necessary components for users to participate in Access Grid based collaborations, and also for developers to work on network services, applications services and node services to extend the functionality of the Access Grid.}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}This module provides the components needed to connect to an Access Grid Venue.}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}Notice that there is no Name, there is now a line with a }{\f3\fs24\lang1033{\*\listtag0}%package}{\f2\fs24\lang1033{\*\listtag0} directive, and the }{\f3\fs24\lang1033{\*\listtag0}%description}{\f2\fs24\lang1033{\*\listtag0} directive now has an "argument." The reason a sub-package has no Name is because it derives it from the "top level" package. A sub-package file name has the form }{\f3\fs24\lang1033{\*\listtag0}"top level name"-%\{package\}-%[version\}-%\{release\}.i386.rpm}{\f2\fs24\lang1033{\*\listtag0} or in this case }{\f3\fs24\lang1033{\*\listtag0}AccessGrid-VenueClient-2.0beta-2.i386.rpm}{\f2\fs24\lang1033{\*\listtag0}.}
\par{\listtext\pard\qj\sb440\sa60 3.3.	}\pard\plain{\qj\sb440\sa60\s17\f0\fs28\b\lang1033{\*\listtag0}{\*\abilist\abilistid518283371\abilistlevel2\abistartat1{\abifieldfont Arial}{\abilistdecimal }{\abilistdelim %L.}{\abiliststyle Numbered List}}{\*\pn\pnql\pnstart1\pnprev\pnlvl9\pndec{\pntxtb }{\pntxta .}}\ls3\ilvl1\tx431{\f0\fs28\b\lang1033{\*\listtag0}Building/Installing Source}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}The Access Grid 2.0 Toolkit is based by and large on python. It only makes sense to make use of some of the built-in python tools like distutils. We use distutils to build the python source and install it into the BuildRoot. There are three rpm directives that are useful here:}
\par{\listtext\pard\qj\fi-431\li720\bullet 	}\pard\plain{\qj\fi-431\li720\s15\f2\fs24\lang1033{\*\listtag0}{\*\abilist\abilistid192734754\abilistparentid0\abilistlevel1\abistartat0{\abifieldfont Symbol}{\abilistdecimal NULL}{\abilistdelim %L}{\abiliststyle Bullet List}}{\*\pn\pnql\pnstart0\pnlvlblt{\pntxtb\bullet}}\ls4\ilvl0{\f2\fs24\lang1033{\*\listtag0}%prep - Untar the source tarball and prep the source tree}
\par}{\listtext\pard\qj\fi-431\li720\bullet 	}\pard\plain{\qj\fi-431\li720\s15\f2\fs24\lang1033{\*\listtag0}{\*\abilist\abilistid192734754\abilistparentid0\abilistlevel1\abistartat0{\abifieldfont Symbol}{\abilistdecimal NULL}{\abilistdelim %L}{\abiliststyle Bullet List}}{\*\pn\pnql\pnstart0\pnlvlblt{\pntxtb\bullet}}\ls4\ilvl0{\f2\fs24\lang1033{\*\listtag0}%build - Build the source}
\par}{\listtext\pard\qj\fi-431\li720\bullet 	}\pard\plain{\qj\fi-431\li720\s15\f2\fs24\lang1033{\*\listtag0}{\*\abilist\abilistid192734754\abilistparentid0\abilistlevel1\abistartat0{\abifieldfont Symbol}{\abilistdecimal NULL}{\abilistdelim %L}{\abiliststyle Bullet List}}{\*\pn\pnql\pnstart0\pnlvlblt{\pntxtb\bullet}}\ls4\ilvl0{\f2\fs24\lang1033{\*\listtag0}%install - Install the built files into the BuildRoot}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}The Build/Install section looks like:}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%prep}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%setup}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}[ -n "%\{buildroot\}" -a "%\{buildroot\}" != / ] && rm -rf %\{buildroot\}}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%build}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}python2.2 setup.py build}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%install}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}python2.2 setup.py install --prefix=%\{buildroot\}%\{prefix\} --no-compile}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}mv %\{buildroot\}%\{prefix\}/etc %\{buildroot\}}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}mv %\{buildroot\}%\{prefix\}/var %\{buildroot\}}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}mkdir -p %\{buildroot\}/tmp/local_services}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}Here you can see we untar the source tarball (using the }{\f3\fs24\lang1033{\*\listtag0}%setup}{\f2\fs24\lang1033{\*\listtag0} rpm macro), remove any previous BuildRoot, build the source using python, install using python, and then make some modifications to the installed tree to better fit our needs. We make these modifications because of some minor limitations in distutils. Namely, in distutils you can either install a file relative to the prefix or to an absolute path. So by default, everything is installed into }{\f3\fs24\lang1033{\*\listtag0}/usr}{\f2\fs24\lang1033{\*\listtag0}. This is fine except we really do want some of these files under }{\f3\fs24\lang1033{\*\listtag0}/}{\f2\fs24\lang1033{\*\listtag0}, like }{\f3\fs24\lang1033{\*\listtag0}etc/}{\f2\fs24\lang1033{\*\listtag0} and }{\f3\fs24\lang1033{\*\listtag0}var/}{\f2\fs24\lang1033{\*\listtag0} so we just move them down to the BuildRoot level. At this point our BuildRoot looks like:}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}usr/}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}etc/}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}var/}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}tmp/local_services}
\par{\listtext\pard\qj\sb440\sa60 3.4.	}\pard\plain{\qj\sb440\sa60\s17\f0\fs28\b\lang1033{\*\listtag0}{\*\abilist\abilistid518283371\abilistlevel2\abistartat1{\abifieldfont Arial}{\abilistdecimal }{\abilistdelim %L.}{\abiliststyle Numbered List}}{\*\pn\pnql\pnstart1\pnprev\pnlvl9\pndec{\pntxtb }{\pntxta .}}\ls3\ilvl1\tx431{\f0\fs28\b\lang1033{\*\listtag0}File Definitions}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}The File Definitions section is where you define which of those installed files go into which package. In the files list you can specify permissions of the file, ownership of the file, whether the file is a config file, as well as many other things. A File Definition list looks like:}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%files}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%doc %\{sharedir\}/doc/}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%defattr(-,root,root)}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%\{prefix\}/lib}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%defattr(0755,root,root)}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%\{prefix\}/bin/AGServiceManager.py}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}/etc/init.d/agsm}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%defattr(0755,ag,ag)}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%dir %\{aghome\}/local_services}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%defattr(0777,nobody,nobody)}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%dir /tmp/local_services}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%defattr(0644,root,root)}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%config %\{sysconfdir\}/AGServiceManager.cfg}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}Here we start the definitions list with the }{\f3\fs24\lang1033{\*\listtag0}%files}{\f2\fs24\lang1033{\*\listtag0} directive. This is the Files Definitions list for the "top level" package. For sub-packages it would look like:}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%files VenueClient}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}Each line is either a filename or setting the attributes for files below. I'll explain key points below:}
\par{\listtext\pard\qj\fi-431\li720\bullet 	}\pard\plain{\qj\fi-431\li720\s15\f2\fs24\lang1033{\*\listtag0}{\*\abilist\abilistid1586128940\abilistparentid0\abilistlevel1\abistartat0{\abifieldfont Symbol}{\abilistdecimal NULL}{\abilistdelim %L}{\abiliststyle Bullet List}}{\*\pn\pnql\pnstart0\pnlvlblt{\pntxtb\bullet}}\ls5\ilvl0{\f3\fs24\lang1033{\*\listtag0}%doc}{\f2\fs24\lang1033{\*\listtag0} - This specifies to RPM that the file following the directive is a documentation file}
\par}{\listtext\pard\qj\fi-431\li720\bullet 	}\pard\plain{\qj\fi-431\li720\s15\f2\fs24\lang1033{\*\listtag0}{\*\abilist\abilistid1586128940\abilistparentid0\abilistlevel1\abistartat0{\abifieldfont Symbol}{\abilistdecimal NULL}{\abilistdelim %L}{\abiliststyle Bullet List}}{\*\pn\pnql\pnstart0\pnlvlblt{\pntxtb\bullet}}\ls5\ilvl0{\f3\fs24\lang1033{\*\listtag0}%defattr}{\f2\fs24\lang1033{\*\listtag0} - This specifies attributes for files below it. It's of the form (<perms>,<owner>,<group>). A dash (-) in any of those fields means use value of the installed file.}
\par}{\listtext\pard\qj\fi-431\li720\bullet 	}\pard\plain{\qj\fi-431\li720\s15\f2\fs24\lang1033{\*\listtag0}{\*\abilist\abilistid1586128940\abilistparentid0\abilistlevel1\abistartat0{\abifieldfont Symbol}{\abilistdecimal NULL}{\abilistdelim %L}{\abiliststyle Bullet List}}{\*\pn\pnql\pnstart0\pnlvlblt{\pntxtb\bullet}}\ls5\ilvl0{\f3\fs24\lang1033{\*\listtag0}%dir}{\f2\fs24\lang1033{\*\listtag0} - This directive specifies to only package the directory and no files, if any, underneath it}
\par}{\listtext\pard\qj\fi-431\li720\bullet 	}\pard\plain{\qj\fi-431\li720\s15\f2\fs24\lang1033{\*\listtag0}{\*\abilist\abilistid1586128940\abilistparentid0\abilistlevel1\abistartat0{\abifieldfont Symbol}{\abilistdecimal NULL}{\abilistdelim %L}{\abiliststyle Bullet List}}{\*\pn\pnql\pnstart0\pnlvlblt{\pntxtb\bullet}}\ls5\ilvl0{\f3\fs24\lang1033{\*\listtag0}%config}{\f2\fs24\lang1033{\*\listtag0} - This specifies to RPM that the file following is a configuration file}
\par}{\listtext\pard\qj\sb440\sa60 3.5.	}\pard\plain{\qj\sb440\sa60\s17\f0\fs28\b\lang1033{\*\listtag0}{\*\abilist\abilistid518283371\abilistlevel2\abistartat1{\abifieldfont Arial}{\abilistdecimal }{\abilistdelim %L.}{\abiliststyle Numbered List}}{\*\pn\pnql\pnstart1\pnprev\pnlvl9\pndec{\pntxtb }{\pntxta .}}\ls3\ilvl1\tx431{\f0\fs28\b\lang1033{\*\listtag0}Pre/Postinstall Scripts}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}You can specify that commands be run prior to installing, after installing, prior to uninstalling, and after uninstalling a rpm package using the rpm directives }{\f3\fs24\lang1033{\*\listtag0}%pre}{\f2\fs24\lang1033{\*\listtag0}, }{\f3\fs24\lang1033{\*\listtag0}%post}{\f2\fs24\lang1033{\*\listtag0}, }{\f3\fs24\lang1033{\*\listtag0}%preun}{\f2\fs24\lang1033{\*\listtag0}, and }{\f3\fs24\lang1033{\*\listtag0}%postun}{\f2\fs24\lang1033{\*\listtag0} respectively. By default these are run from a bash shell and so bash scripting can be used. A simple example of a script is:}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%post VenueClient}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}/sbin/chkconfig --add agns}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}Whereas a more complicated script is:}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%post}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}cat <<EOF > /tmp/AccessGrid-Postinstall.py}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}#!/usr/bin/python2.2}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}import AccessGrid}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}import AccessGrid.hosting}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}import AccessGrid.hosting.pyGlobus}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}import os}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}import os.path}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}import glob}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}import sys}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}def modimport(module):}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}    for module_file in glob.glob(os.path.join(module.__path__[0], "*.py")):}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}\tab try:}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}            __import__(module.__name__ + "." + os.path.basename(module_file[:-3]))}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}\tab except:}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}\tab     pass}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}sys.stdout.write("Compiling Access Grid Python modules.... ")}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}modimport(AccessGrid)}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}modimport(AccessGrid.hosting)}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}modimport(AccessGrid.hosting.pyGlobus)}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}sys.stdout.write("Done\\n")}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}EOF}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}chmod +x /tmp/AccessGrid-Postinstall.py}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}/tmp/AccessGrid-Postinstall.py}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}rm -f /tmp/AccessGrid-Postinstall.py}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}/sbin/chkconfig --add agsm}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}The first script just calls the chkconfig command to remove the agns service prior to uninstalling the AccessGrid-VenueClient rpm. The second script creates a file that is actually a python script that compiles all the modules in the AccessGrid rpm, runs it, then deletes it as well as running chkconfig to add the agsm service.}
\par{\listtext\pard\qj\sb440\sa60 3.6.	}\pard\plain{\qj\sb440\sa60\s17\f0\fs28\b\lang1033{\*\listtag0}{\*\abilist\abilistid518283371\abilistlevel2\abistartat1{\abifieldfont Arial}{\abilistdecimal }{\abilistdelim %L.}{\abiliststyle Numbered List}}{\*\pn\pnql\pnstart1\pnprev\pnlvl9\pndec{\pntxtb }{\pntxta .}}\ls3\ilvl1\tx431{\f0\fs28\b\lang1033{\*\listtag0}ChangeLog}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}The ChangeLog is where you keep a history of the changes to the rpm spec file. It must be in chronological order with most recent events at the top. It looks like:}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}%changelog}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}* Wed Mar 26 2003 Ti Leggett <leggett@mcs.anl.gov>}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}- Added a plethora of comments}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}- Fixed a few permissions for some install files}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}- Now removes the AccessGrid pre-uninstall script after it's run}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}* Thu Mar 13 2003 Ti Leggett <leggett@mcs.anl.gov>}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}- Added user and group creation in preinstall}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}- Added postinstall to compile python modules}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}- Services are added to chkconfig for starting}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}- Added preuninstall to remove compiled modules}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}- Move etc and var down a dir after python install so they're where they need to be}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}* Fri Feb 21 2003 Ti Leggett <leggett@mcs.anl.gov>}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}- Fixed where docs go}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}- Added default node configuration file}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}* Fri Feb 14 2003 Ti Leggett <leggett@mcs.anl.gov>}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}- Added postinstall for VenueClient to create AGNodeService config file}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}* Thu Feb 13 2003 Ti Leggett <leggett@mcs.anl.gov>}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}- Added SetupVideo.py to VideoProducer}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}* Fri Feb 06 2003 Ti Leggett <leggett@mcs.anl.gov>}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}- Modularized the RPMs}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}* Tue Feb 05 2003 Ti Leggett <leggett@mcs.anl.gov>}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}- This file was created}
\par{\listtext\pard\qj\sb440\sa60 4.	}\pard\plain{\qj\sb440\sa60\s16\f0\fs34\b\lang1033{\*\listtag0}{\*\abilist\abilistid2107612293\abilistlevel1\abistartat1{\abifieldfont Arial}{\abilistdecimal }{\abilistdelim %L.}{\abiliststyle Numbered List}}{\*\pn\pnql\pnstart1\pnlvlbody\pndec{\pntxtb }{\pntxta .}}\ls1\ilvl0\tx431{\f0\fs34\b\lang1033{\*\listtag0}Packaging the Access Grid Toolkit}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}Once you have an understanding of the above you need to actually make the rpms. The process of doing this is as follows:}
\par{\listtext\pard\qj\fi-431\li720 1.	}\pard\plain{\qj\fi-431\li720\s15\f2\fs24\lang1033{\*\listtag0}{\*\abilist\abilistid818376912\abilistparentid0\abilistlevel1\abistartat1{\abifieldfont NULL}{\abilistdecimal .}{\abilistdelim %L.}{\abiliststyle Numbered List}}{\*\pn\pnql\pnstart1\pnlvlbody\pndec{\pntxtb }{\pntxta .}}\fn-431\li720\ls6\ilvl0{\f2\fs24\lang1033{\*\listtag0}Checkout the Access Grid Toolkit from CVS}
\par}{\listtext\pard\qj\fi-431\li720 2.	}\pard\plain{\qj\fi-431\li720\s15\f2\fs24\lang1033{\*\listtag0}{\*\abilist\abilistid818376912\abilistparentid0\abilistlevel1\abistartat1{\abifieldfont NULL}{\abilistdecimal .}{\abilistdelim %L.}{\abiliststyle Numbered List}}{\*\pn\pnql\pnstart1\pnlvlbody\pndec{\pntxtb }{\pntxta .}}\fn-431\li720\ls6\ilvl0{\f2\fs24\lang1033{\*\listtag0}Make the source tarball}
\par}{\listtext\pard\qj\fi-431\li720 3.	}\pard\plain{\qj\fi-431\li720\s15\f2\fs24\lang1033{\*\listtag0}{\*\abilist\abilistid818376912\abilistparentid0\abilistlevel1\abistartat1{\abifieldfont NULL}{\abilistdecimal .}{\abilistdelim %L.}{\abiliststyle Numbered List}}{\*\pn\pnql\pnstart1\pnlvlbody\pndec{\pntxtb }{\pntxta .}}\fn-431\li720\ls6\ilvl0{\f2\fs24\lang1033{\*\listtag0}Become root}
\par}{\listtext\pard\qj\fi-431\li720 4.	}\pard\plain{\qj\fi-431\li720\s15\f2\fs24\lang1033{\*\listtag0}{\*\abilist\abilistid818376912\abilistparentid0\abilistlevel1\abistartat1{\abifieldfont NULL}{\abilistdecimal .}{\abilistdelim %L.}{\abiliststyle Numbered List}}{\*\pn\pnql\pnstart1\pnlvlbody\pndec{\pntxtb }{\pntxta .}}\fn-431\li720\ls6\ilvl0{\f2\fs24\lang1033{\*\listtag0}Copy the spec file and source tarball to the RPM build tree}
\par}{\listtext\pard\qj\fi-431\li720 5.	}\pard\plain{\qj\fi-431\li720\s15\f2\fs24\lang1033{\*\listtag0}{\*\abilist\abilistid818376912\abilistparentid0\abilistlevel1\abistartat1{\abifieldfont NULL}{\abilistdecimal .}{\abilistdelim %L.}{\abiliststyle Numbered List}}{\*\pn\pnql\pnstart1\pnlvlbody\pndec{\pntxtb }{\pntxta .}}\fn-431\li720\ls6\ilvl0{\f2\fs24\lang1033{\*\listtag0}Build the RPM}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}A real world example might look something like this:}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}cd /sandbox/AGCVS/HEAD}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}rm -rf AccessGrid}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}cvs co AccessGrid}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}mv AccessGrid AccessGrid-2.0beta}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}tar zxcf AccessGrid-2.0beta.tar.gz AccessGrid}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}su}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}cd /usr/src/redhat}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}cp /sandbox/AGCVS/HEAD/AccessGrid-2.0beta.tar.gz SOURCES/.}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}cp /sandbox/AGCVS/HEAD/AccessGrid/packaging/redhat/AccessGrid.spec SPECS/.}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}cd SPECS}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}rpm -ba AccessGrid.spec}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}Here's what this does. First you need to change to a directory where you will checkout the package and delete any previous cvs module currently there. Then you need to check out the AccessGrid module. Then you make the source tarball. The name of the tarball comes from the spec file from the "top level" package description where the line looks like:}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Source:\tab \tab %\{name\}-%\{version\}.tar.gz}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}Then you must become root and change to the RPM build tree which by default is }{\f3\fs24\lang1033{\*\listtag0}/usr/src/redhat}{\f2\fs24\lang1033{\*\listtag0} and copy the source tarball and spec file to the proper locations. Then you build the rpm from the spec file. If all goes well you should see lines like:}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Wrote: /usr/src/redhat/SRPMS/AccessGrid-2.0beta-2.src.rpm}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Wrote: /usr/src/redhat/RPMS/i386/AccessGrid-2.0beta-2.i386.rpm}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Wrote: /usr/src/redhat/RPMS/i386/AccessGrid-VenueClient-2.0beta-2.i386.rpm}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Wrote: /usr/src/redhat/RPMS/i386/AccessGrid-VenueServer-2.0beta-2.i386.rpm}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Wrote: /usr/src/redhat/RPMS/i386/AccessGrid-VideoProducer-2.0beta-2.i386.rpm}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Wrote: /usr/src/redhat/RPMS/i386/AccessGrid-VideoConsumer-2.0beta-2.i386.rpm}
\par\pard\plain\qj\s15{\f3\fs24\lang1033{\*\listtag0}Wrote: /usr/src/redhat/RPMS/i386/AccessGrid-AudioService-2.0beta-2.i386.rpm}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}Which tells you where it actually wrote the rpms.}
\par{\listtext\pard\qj\sb440\sa60 5.	}\pard\plain{\qj\sb440\sa60\s16\f0\fs34\b\lang1033{\*\listtag0}{\*\abilist\abilistid2107612293\abilistlevel1\abistartat1{\abifieldfont Arial}{\abilistdecimal }{\abilistdelim %L.}{\abiliststyle Numbered List}}{\*\pn\pnql\pnstart1\pnlvlbody\pndec{\pntxtb }{\pntxta .}}\ls1\ilvl0\tx431{\f0\fs34\b\lang1033{\*\listtag0}Links}
\par}\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}Maximum RPM Documentation :: }{\f2\fs24\lang1033{\*\listtag0}http://www.rpm.org/max-rpm/}
\par\pard\plain\qj\s15{\f2\fs24\lang1033{\*\listtag0}Python Disutils Documentation :: }{\f2\fs24\lang1033{\*\listtag0}http://www.python.org/dev/doc/devel/dist/dist.html}}